const { GoogleGenerativeAI } = require('@google/generative-ai');

const apiKey = process.env.REACT_APP_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: 'gemini-1.5-flash',
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: 'application/json',
};

async function summarizeAndExtractPrescription(transcription) {
  try {
    const parts = [
         {text: "input: Good afternoon, Mr. Thomas. How have you been feeling since your last appointment?\nGood afternoon, doctor. I've been having a lot of issues recently. My blood pressure’s been erratic, and I keep feeling dizzy, especially in the mornings. I also received my lab reports, and they said something about a hyperplasia in my thyroid and elevated triclisorides. I'm not sure what that means.\nI see, let’s go over your reports. It seems there’s indeed evidence of nodular thyroid hyperplation, which could be causing your symptoms. Additionally, your triglycerides are significantly high at 356 mg/dL, which is a risk factor for cardiovascular disease. The normal range should be less than 150 mg/dL.\nWhat exactly is hyperplation, doctor?\nThyroid hyperplasia refers to an abnormal enlargement of the thyroid gland. This could be due to hormonal imbalances, but it needs further investigation. We’ll need to monitor this closely and might have to refer you to an endocrinologist.\nOh, I see. Is it dangerous?\nIt’s something that we need to keep an eye on, but it’s not immediately life-threatening. As for your triglycerides, we’ll need to put you on medication. I'm going to prescribe you Lipitor by Pfizer. The active ingredient is atorvistatin, and you'll take 20 milligrams at night. This will help lower your cholesterol levels.\nAlright, doctor. What else?\nI’ll also prescribe Fenoglide by Abbvie, which contains fenofibrate, to further reduce your triglycerides. You’ll take it once a day in the morning, 160 milligrams. In addition, I want you to take Omacor, also known as omega-3 fatty acid ethyl esters. This will help manage your triglyceride levels as well. The dosage is 2 grams per day, and you’ll take 1 gram in the morning and 1 gram in the evening.\nGot it. Is there anything else I should know?\nYes, I’ll also be starting you on Ramipril by AstraZeneca, which is an ACE inhibitor to help control your blood pressure. You’ll take 5 milligrams in the morning and 5 milligrams in the evening. Keep an eye on any side effects like dizziness or persistent cough.\nOkay, doctor. I’ll follow your instructions. What about my diet?\nYou’ll need to follow a low-fat, low-sodium diet, and reduce alcohol intake to help manage both your cholesterol and blood pressure. Make sure you drink plenty of water and exercise regularly.\nUnderstood, doctor. Thank you."},
    {text: "output: {\n  \"reviewed_transcription\": \"Good afternoon, Mr. Thomas. How have you been feeling since your last appointment? Good afternoon, doctor. I've been having a lot of issues recently. My blood pressure’s been erratic, and I keep feeling dizzy, especially in the mornings. I also received my lab reports, and they mentioned something about hyperplasia in my thyroid and elevated triglycerides. I'm not sure what that means. I see, let’s go over your reports. It seems there’s indeed evidence of nodular thyroid hyperplasia, which could be causing your symptoms. Additionally, your triglycerides are significantly high at 356 mg/dL, which is a risk factor for cardiovascular disease. The normal range should be less than 150 mg/dL. What exactly is hyperplasia, doctor? Thyroid hyperplasia refers to an abnormal enlargement of the thyroid gland. This could be due to hormonal imbalances, but it needs further investigation. We’ll need to monitor this closely and might have to refer you to an endocrinologist. Oh, I see. Is it dangerous? It’s something that we need to keep an eye on, but it’s not immediately life-threatening. As for your triglycerides, we’ll need to put you on medication. I'm going to prescribe you Lipitor by Pfizer. The active ingredient is atorvastatin, and you'll take 20 milligrams at night. This will help lower your cholesterol levels. Alright, doctor. What else? I’ll also prescribe Fenoglide by Abbvie, which contains fenofibrate, to further reduce your triglycerides. You’ll take it once a day in the morning, 160 milligrams. In addition, I want you to take Omacor, also known as omega-3 fatty acid ethyl esters. This will help manage your triglyceride levels as well. The dosage is 2 grams per day, and you’ll take 1 gram in the morning and 1 gram in the evening. Got it. Is there anything else I should know? Yes, I’ll also be starting you on Ramipril by AstraZeneca, which is an ACE inhibitor to help control your blood pressure. You’ll take 5 milligrams in the morning and 5 milligrams in the evening. Keep an eye on any side effects like dizziness or persistent cough. Okay, doctor. I’ll follow your instructions. What about my diet? You’ll need to follow a low-fat, low-sodium diet, and reduce alcohol intake to help manage both your cholesterol and blood pressure. Make sure you drink plenty of water and exercise regularly. Understood, doctor. Thank you.\",\n  \n  \"summary\": \"Mr. Thomas reports erratic blood pressure and dizziness, especially in the mornings. His lab results indicate nodular thyroid hyperplasia and elevated triglycerides at 356 mg/dL, posing a risk for cardiovascular disease. The doctor explains thyroid hyperplasia and prescribes Lipitor (atorvastatin) to manage cholesterol, Fenoglide (fenofibrate) to lower triglycerides, Omacor (omega-3 fatty acids) for triglyceride management, and Ramipril (ACE inhibitor) for blood pressure control. The doctor advises a low-fat, low-sodium diet, reducing alcohol, regular exercise, and monitoring for side effects like dizziness or cough.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Lipitor\",\n      \"content\": \"Atorvastatin\",\n      \"dosage\": \"20 mg\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Lower cholesterol and manage cardiovascular health.\"\n    },\n    {\n      \"name\": \"Fenoglide\",\n      \"content\": \"Fenofibrate\",\n      \"dosage\": \"160 mg\",\n      \"usage_instructions\": \"1--0--0\",\n      \"purpose\": \"Reduce triglyceride levels.\"\n    },\n    {\n      \"name\": \"Omacor\",\n      \"content\": \"Omega-3 fatty acid ethyl esters\",\n      \"dosage\": \"2 grams\",\n      \"usage_instructions\": \"1--0--1\",\n      \"purpose\": \"Manage triglyceride levels.\"\n    },\n    {\n      \"name\": \"Ramipril\",\n      \"content\": \"Ramipril\",\n      \"dosage\": \"5 mg\",\n      \"usage_instructions\": \"1--0--1\",\n      \"purpose\": \"Control blood pressure.\"\n    }\n  ]\n}"},
    {text: "input: Hello, Mr. Lee. How have you been managing your asthma symptoms lately?Hi, doctor. I’ve been using my inhaler more frequently, especially at night. My peak flow readings have been around 60% of my personal best, and I often wake up feeling short of breath.That’s concerning. Have you had any recent respiratory infections?Yes, I had a cold a few weeks ago, and since then, my symptoms have worsened. I also received my allergy test results, and it turns out I’m allergic to dust mites and pollen.We need to manage your asthma more aggressively. I’m going to prescribe Advair Diskus by GlaxoSmithKline to help control your symptoms. You’ll take one puff in the morning and one puff in the evening.Got it. What about my rescue inhaler?You should continue using your Albuterol Inhaler by Mylan as needed, but let’s adjust your dosage. You can take 2 puffs every 4-6 hours during an asthma attack.Is there anything else I should be aware of?Yes, I’ll also prescribe Montelukast by Merck, which you’ll take 10 mg once a day at night to help with your allergies and asthma symptoms. Avoid exposure to known allergens as much as possible.Thank you, doctor. I’ll follow your instructions carefully."},
    {text: "output: {\n  \"reviewed_transcription\": \"Hello, Mr. Lee. How have you been managing your asthma symptoms lately? Hi, doctor. I’ve been using my inhaler more frequently, especially at night. My peak flow readings have been around 60% of my personal best, and I often wake up feeling short of breath. That’s concerning. Have you had any recent respiratory infections? Yes, I had a cold a few weeks ago, and since then, my symptoms have worsened. I also received my allergy test results, and it turns out I’m allergic to dust mites and pollen. We need to manage your asthma more aggressively. I’m going to prescribe Advair Diskus by GlaxoSmithKline to help control your symptoms. You’ll take one puff in the morning and one puff in the evening. Got it. What about my rescue inhaler? You should continue using your Albuterol Inhaler by Mylan as needed, but let’s adjust your dosage. You can take 2 puffs every 4-6 hours during an asthma attack. Is there anything else I should be aware of? Yes, I’ll also prescribe Montelukast by Merck, which you’ll take 10 mg once a day at night to help with your allergies and asthma symptoms. Avoid exposure to known allergens as much as possible. Thank you, doctor. I’ll follow your instructions carefully.\",\n  \n  \"summary\": \"Mr. Lee reports increased asthma symptoms, using his inhaler more frequently and experiencing shortness of breath, especially at night. His peak flow readings are at 60% of his best, and he has a history of recent respiratory infections. Allergy tests confirm sensitivities to dust mites and pollen. The doctor prescribes Advair Diskus (one puff twice daily) for symptom control, an adjusted Albuterol inhaler dosage (2 puffs every 4-6 hours as needed), and Montelukast (10 mg at night) to manage asthma and allergy symptoms.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Advair Diskus\",\n      \"content\": \"Fluticasone/Salmeterol\",\n      \"dosage\": \"One puff\",\n      \"usage_instructions\": \"1--0--1\",\n      \"purpose\": \"Control asthma symptoms.\"\n    },\n    {\n      \"name\": \"Albuterol Inhaler\",\n      \"content\": \"Albuterol\",\n      \"dosage\": \"2 puffs\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Rescue inhaler for asthma attacks.\"\n    },\n    {\n      \"name\": \"Montelukast\",\n      \"content\": \"Montelukast\",\n      \"dosage\": \"10 mg\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Manage asthma and allergy symptoms.\"\n    }\n  ]\n}"},
    {text: "input: Good morning, Mrs. Parker. How have you been feeling since your last visit?Good morning, doctor. I’ve been experiencing some intense joint pain, particularly in my knees and hands. The pain is worse in the morning and gets better throughout the day. My lab results showed elevated uric acid levels at 9.5 mg/dL.I see. That uric acid level is indeed above the normal range, which is typically less than 6 mg/dL. It suggests you may be dealing with gout. Have you noticed any swelling or redness in your joints?Yes, my left knee is swollen, and it feels warm to the touch. I also have a family history of gout; my father had it.Alright. I’m going to prescribe Allopurinol by Teva to help lower your uric acid levels. You'll take 300 milligrams daily.Should I take it in the morning or evening?Take it in the morning with plenty of water. Additionally, I'll also prescribe Colchicine by Endo Pharmaceuticals to help manage the pain during flare-ups. You’ll take 0.6 mg once or twice a day until the pain subsides.Okay, doctor. What about my diet?It’s important to avoid foods high in purines, like red meat and seafood. Stay hydrated and aim for at least 2 liters of water a day.Thank you, doctor. I appreciate your help."},
    {text: "output: {\n  \"reviewed_transcription\": \"Good morning, Mrs. Parker. How have you been feeling since your last visit? Good morning, doctor. I’ve been experiencing some intense joint pain, particularly in my knees and hands. The pain is worse in the morning and gets better throughout the day. My lab results showed elevated uric acid levels at 9.5 mg/dL. I see. That uric acid level is indeed above the normal range, which is typically less than 6 mg/dL. It suggests you may be dealing with gout. Have you noticed any swelling or redness in your joints? Yes, my left knee is swollen, and it feels warm to the touch. I also have a family history of gout; my father had it. Alright. I’m going to prescribe Allopurinol by Teva to help lower your uric acid levels. You'll take 300 milligrams daily. Should I take it in the morning or evening? Take it in the morning with plenty of water. Additionally, I'll also prescribe Colchicine by Endo Pharmaceuticals to help manage the pain during flare-ups. You’ll take 0.6 mg once or twice a day until the pain subsides. Okay, doctor. What about my diet? It’s important to avoid foods high in purines, like red meat and seafood. Stay hydrated and aim for at least 2 liters of water a day. Thank you, doctor. I appreciate your help.\",\n  \n  \"summary\": \"Mrs. Parker reports intense joint pain in her knees and hands, worsening in the morning. Lab results indicate elevated uric acid levels at 9.5 mg/dL, suggesting gout. The doctor prescribes Allopurinol (300 mg daily) to lower uric acid and Colchicine (0.6 mg once or twice a day) for pain management. Dietary changes include avoiding high-purine foods and increasing water intake to 2 liters per day.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Allopurinol\",\n      \"content\": \"Allopurinol\",\n      \"dosage\": \"300 mg\",\n      \"usage_instructions\": \"1--0--0\",\n      \"purpose\": \"Lower uric acid levels to manage gout.\"\n    },\n    {\n      \"name\": \"Colchicine\",\n      \"content\": \"Colchicine\",\n      \"dosage\": \"0.6 mg\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Manage pain during gout flare-ups.\"\n    }\n  ]\n}"},
    {text: "input: Good morning, Dr. Smith. I’ve been having these frquent migrains that are realy bad. It’s mostly on the left side of my hed, and I feel nausious afterward. I did some lab tests and the results say my electrolytes are low, especially potasium and sodium. I don’t know what that means, but my friend said it could be serious.That does sound concerning. Low electrolytes can cause headaches and nausea. We also need to check your blood pressure; it's important to monitor that with your symptoms. Have you been taking your medications regularly?Yes, I take them, but I sometimes forget to take the metformin for my diabetes. I also take lisinopril for my high blood pressure, but I don’t remember the doses right now.Let’s make sure we get you back on track. I’ll prescribe Zofran by Teva for your nausea and to help you eat better. You’ll take it 8 mg before meals. Also, I’ll prescribe Klor-Con by Mylan for your low potassium levels. It’s a potassium chloride supplement you’ll take once a day."},
    {text: "output: {\n  \"reviewed_transcription\": \"Good morning, Dr. Smith. I’ve been having these frequent migraines that are really bad. It’s mostly on the left side of my head, and I feel nauseous afterward. I did some lab tests, and the results say my electrolytes are low, especially potassium and sodium. I don’t know what that means, but my friend said it could be serious. That does sound concerning. Low electrolytes can cause headaches and nausea. We also need to check your blood pressure; it's important to monitor that with your symptoms. Have you been taking your medications regularly? Yes, I take them, but I sometimes forget to take the metformin for my diabetes. I also take lisinopril for my high blood pressure, but I don’t remember the doses right now. Let’s make sure we get you back on track. I’ll prescribe Zofran by Teva for your nausea and to help you eat better. You’ll take it 8 mg before meals. Also, I’ll prescribe Klor-Con by Mylan for your low potassium levels. It’s a potassium chloride supplement you’ll take once a day.\",\n  \n  \"summary\": \"Mr. Smith presents with frequent migraines primarily located on the left side of his head, accompanied by nausea. Lab results indicate low electrolyte levels, particularly potassium and sodium. The doctor prescribes Zofran (8 mg before meals) to manage nausea and Klor-Con (potassium chloride) to address low potassium levels. It is also noted that Mr. Smith sometimes forgets to take his metformin for diabetes and lisinopril for hypertension.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Zofran\",\n      \"content\": \"Ondansetron\",\n      \"dosage\": \"8 mg\",\n      \"usage_instructions\": \"0--1--0\",\n      \"purpose\": \"Manage nausea.\"\n    },\n    {\n      \"name\": \"Klor-Con\",\n      \"content\": \"Potassium Chloride\",\n      \"dosage\": \"N/A\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Supplement for low potassium levels.\"\n    }\n  ]\n}"},
    {text: "input: Hi, Dr. Johnson. I have ben feeling really tierd lately and my joints are acheing. I think it might be related to the tests I had done. My thyroid levels came back normal, but I’m not sure what that means. I’m also a little depressed because I lost my job recently.I’m sorry to hear that. Depression can affect your physical health too. We should look into this further. Have you had any blood work to check for anemia or inflammation markers?I did a CBC, and the doctor said my iron levels are low, but I don’t understand what that means. I’ve been taking iron pills, but they don’t seem to help.We need to increase your iron intake. I’m going to prescribe Ferrous Sulfate by Amgen. You’ll take 325 mg twice a day with food. I’ll also recommend a multivitamin to ensure you're getting all the necessary nutrients.Okay, I’ll do that. What about my joint pain?"},
    {text: "output: {\n  \"reviewed_transcription\": \"Hi, Dr. Johnson. I have been feeling really tired lately, and my joints are aching. I think it might be related to the tests I had done. My thyroid levels came back normal, but I’m not sure what that means. I’m also a little depressed because I lost my job recently. I’m sorry to hear that. Depression can affect your physical health too. We should look into this further. Have you had any blood work to check for anemia or inflammation markers? I did a CBC, and the doctor said my iron levels are low, but I don’t understand what that means. I’ve been taking iron pills, but they don’t seem to help. We need to increase your iron intake. I’m going to prescribe Ferrous Sulfate by Amgen. You’ll take 325 mg twice a day with food. I’ll also recommend a multivitamin to ensure you're getting all the necessary nutrients. Okay, I’ll do that. What about my joint pain?\",\n  \n  \"summary\": \"Mr. Johnson reports fatigue and joint pain, linking it to recent lab tests where thyroid levels were normal. He expresses concern about low iron levels from his CBC results and mentions depression due to job loss. The doctor prescribes Ferrous Sulfate (325 mg twice daily with food) to address low iron and recommends a multivitamin for overall nutrition.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Ferrous Sulfate\",\n      \"content\": \"Iron\",\n      \"dosage\": \"325 mg\",\n      \"usage_instructions\": \"1--0--0\",\n      \"purpose\": \"Increase iron levels.\"\n    },\n    {\n      \"name\": \"Multivitamin\",\n      \"content\": \"Vitamins and Minerals\",\n      \"dosage\": \"N/A\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Ensure adequate nutrient intake.\"\n    }\n  ]\n}"},
    {text: "input: Hello, Dr. Davis. I’m here for my follow-up regarding my chronic respiratory issues. I’ve been coughing a lot and sometimes I feel a tightness in my chest. My last chest X-ray showed something that the doctor said might be bronchitis, but I’m not sure.We definitely need to address those symptoms. How often are you experiencing the cough, and have you noticed any wheezing?It’s pretty constant, especially at night, and yes, I do hear a wheezing sound when I breathe. My last spirometry test indicated reduced lung capacity, but I don’t know what that means.That suggests there may be some obstruction in your airways. I’m going to prescribe Advair by GlaxoSmithKline for your asthma. You’ll take one inhalation twice a day. Additionally, I’ll give you Prednisone by Mylan, a steroid, to help reduce inflammation. You’ll take 10 mg once daily for five days.Thanks, doctor. I really hope this helps my breathing."},
    {text: "output: {\n  \"reviewed_transcription\": \"Hello, Dr. Davis. I’m here for my follow-up regarding my chronic respiratory issues. I’ve been coughing a lot, and sometimes I feel a tightness in my chest. My last chest X-ray showed something that the doctor said might be bronchitis, but I’m not sure. We definitely need to address those symptoms. How often are you experiencing the cough, and have you noticed any wheezing? It’s pretty constant, especially at night, and yes, I do hear a wheezing sound when I breathe. My last spirometry test indicated reduced lung capacity, but I don’t know what that means. That suggests there may be some obstruction in your airways. I’m going to prescribe Advair by GlaxoSmithKline for your asthma. You’ll take one inhalation twice a day. Additionally, I’ll give you Prednisone by Mylan, a steroid, to help reduce inflammation. You’ll take 10 mg once daily for five days. Thanks, doctor. I really hope this helps my breathing.\",\n  \n  \"summary\": \"Mr. Davis is experiencing chronic respiratory issues, including constant coughing, chest tightness, and wheezing, particularly at night. A recent chest X-ray suggested bronchitis, and a spirometry test indicated reduced lung capacity. The doctor prescribes Advair (one inhalation twice daily) for asthma management and Prednisone (10 mg once daily for five days) to reduce inflammation.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Advair\",\n      \"content\": \"Fluticasone/Salmeterol\",\n      \"dosage\": \"One inhalation\",\n      \"usage_instructions\": \"1--0--1\",\n      \"purpose\": \"Manage asthma symptoms.\"\n    },\n    {\n      \"name\": \"Prednisone\",\n      \"content\": \"Prednisone\",\n      \"dosage\": \"10 mg\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Reduce inflammation in the airways.\"\n    }\n  ]\n}"},
    {text: "input: Hi, Dr. Wilson. I’ve been experincing really bad heartburn and it’s getting worse every day. I tried taking some antacids, but they don’t help much. Sometimes I feel like I’m choking on my food, especially when I lie down after eating. I had a endoscopy last year, and they said I might have GERD, but I’m not sure.That sounds uncomfortable. GERD can definitely cause those symptoms. Have you made any changes to your diet or lifestyle?I’ve tried to avoid spicy foods, but I still eat late at night, which I think is the problem.We can definitely help with that. I’m going to prescribe Pantoprazole by Takeda for your acid reflux. You’ll take 40 mg once a day in the morning before meals. I’d also recommend some dietary changes, like not eating close to bedtime.Thank you, doctor. I hope this helps."},
    {text: "output: {\n  \"reviewed_transcription\": \"Hi, Dr. Wilson. I’ve been experiencing really bad heartburn, and it’s getting worse every day. I tried taking some antacids, but they don’t help much. Sometimes I feel like I’m choking on my food, especially when I lie down after eating. I had an endoscopy last year, and they said I might have GERD, but I’m not sure. That sounds uncomfortable. GERD can definitely cause those symptoms. Have you made any changes to your diet or lifestyle? I’ve tried to avoid spicy foods, but I still eat late at night, which I think is the problem. We can definitely help with that. I’m going to prescribe Pantoprazole by Takeda for your acid reflux. You’ll take 40 mg once a day in the morning before meals. I’d also recommend some dietary changes, like not eating close to bedtime. Thank you, doctor. I hope this helps.\",\n  \n  \"summary\": \"Mr. Wilson reports worsening heartburn, despite taking antacids, and experiences choking sensations after eating, especially when lying down. He previously underwent an endoscopy that indicated possible GERD. The doctor prescribes Pantoprazole (40 mg once daily before meals) to manage acid reflux and recommends dietary changes to avoid eating close to bedtime.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Pantoprazole\",\n      \"content\": \"Proton pump inhibitor for acid reflux\",\n      \"dosage\": \"40 mg\",\n      \"usage_instructions\": \"1--0--0\",\n      \"purpose\": \"Reduce stomach acid and alleviate GERD symptoms.\"\n    }\n  ]\n}"},
    {text: "input: Good afternoon, Mr. Carlson. How have you been feeling? Good afternoon, doctor. I’ve been having these persistent headaches, especially on my right side, along with some blur vison and dizziness. I see. We recently conducted a DSA procedure to get a clearer view of your blood vessels. I have the report here, and it shows that you have a significant stenous in your right caratoid artery, which is likely the cause of these symptoms. What does stenous mean, doctor? It’s a narrowing of the blood vessels, Mr. Carlson. In your case, this narrowing is restricting blood flow to certain parts of the brain, which is why you’re experiencing symptoms like headaches and dizziness. Oh, I see. So, what can be done? I’m going to recommend a few medications to manage your symptoms and improve blood flow, and we’ll also plan for a stend procedure in the coming weeks to address the blockage. First, I’m prescribing aspirn to help thin the blood and prevent any clots from forming. The dosage is 75 milligrams once a day. You’ll take this with food to avoid stomach issues. Understood, doctor. What else? I’ll also prescribe atorvistatin to manage cholesterol levels, as high cholesterol can worsen this condition. The dosage will be 20 milligrams at night. Finally, I’ll prescribe plaviks, which is another anti-platlet medication to work alongside the aspirn. Take it once daily. Ok doctor, so I’ll take the aspirn, plaviks, and atorvistatin daily. Is that all? Yes, for now. These should help stabilize your condition while we plan for the procedure. Do let me know if your symptoms worsen. Thanks for explaining, doctor. I’ll follow the plan."},
    {text: "output: {\n  \"reviewed_transcription\": \"Good afternoon, Mr. Carlson. How have you been feeling? Good afternoon, doctor. I’ve been having these persistent headaches, especially on my right side, along with some blur vision and dizziness. I see. We recently conducted a DSA procedure to get a clearer view of your blood vessels. I have the report here, and it shows that you have a significant stenosis in your right carotid artery, which is likely the cause of these symptoms. What does stenosis mean, doctor? It’s a narrowing of the blood vessels, Mr. Carlson. In your case, this narrowing is restricting blood flow to certain parts of the brain, which is why you’re experiencing symptoms like headaches and dizziness. Oh, I see. So, what can be done? I’m going to recommend a few medications to manage your symptoms and improve blood flow, and we’ll also plan for a stent procedure in the coming weeks to address the blockage. First, I’m prescribing aspirin to help thin the blood and prevent any clots from forming. The dosage is 75 milligrams once a day. You’ll take this with food to avoid stomach issues. Understood, doctor. What else? I’ll also prescribe atorvastatin to manage cholesterol levels, as high cholesterol can worsen this condition. The dosage will be 20 milligrams at night. Finally, I’ll prescribe Plavix, which is another anti-platelet medication to work alongside the aspirin. Take it once daily. Ok doctor, so I’ll take the aspirin, Plavix, and atorvastatin daily. Is that all? Yes, for now. These should help stabilize your condition while we plan for the procedure. Do let me know if your symptoms worsen. Thanks for explaining, doctor. I’ll follow the plan.\",\n  \n  \"summary\": \"Mr. Carlson presents with persistent headaches on his right side, blurred vision, and dizziness. A DSA procedure revealed significant stenosis in his right carotid artery, restricting blood flow to the brain. To manage symptoms and improve blood flow, the doctor prescribes aspirin (75 mg daily with food) to prevent blood clots, atorvastatin (20 mg at night) for cholesterol management, and Plavix (once daily) as an anti-platelet medication. A stent procedure is planned for the future to address the blockage.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Aspirin\",\n      \"content\": \"Aspirin\",\n      \"dosage\": \"75 mg\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Thin the blood and prevent clots.\"\n    },\n    {\n      \"name\": \"Atorvastatin\",\n      \"content\": \"Atorvastatin\",\n      \"dosage\": \"20 mg\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Manage cholesterol levels.\"\n    },\n    {\n      \"name\": \"Plavix\",\n      \"content\": \"Clopidogrel\",\n      \"dosage\": \"N/A\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Prevent blood clots in conjunction with aspirin.\"\n    }\n  ]\n}"},
    {text: "input: Hello, Dr. Lee. I’ve been havin some issues with my skin. I get these red rashes that itch a lot, and they sometimes ooze. It started on my arms and now it’s spread to my legs. I think it might be some kinda allergy. I also tried over-the-counter creams, but they don’t work.That sounds quite bothersome. Have you had any new products or foods that you’ve tried recently?Yes, I started using a new laundry detergent and a new lotion.We’ll need to investigate that further. In the meantime, I’m going to prescribe Hydrocortisone cream by Perrigo to help reduce the inflammation and itching. You can apply it twice daily to the affected areas. If it doesn’t improve, we may need to do some allergy testing.Thank you, doctor. I hope it clears up soon."},
    {text: "output: {\n  \"reviewed_transcription\": \"Hello, Dr. Lee. I’ve been having some issues with my skin. I get these red rashes that itch a lot, and they sometimes ooze. It started on my arms, and now it’s spread to my legs. I think it might be some kind of allergy. I also tried over-the-counter creams, but they don’t work. That sounds quite bothersome. Have you had any new products or foods that you’ve tried recently? Yes, I started using a new laundry detergent and a new lotion. We’ll need to investigate that further. In the meantime, I’m going to prescribe Hydrocortisone cream by Perrigo to help reduce the inflammation and itching. You can apply it twice daily to the affected areas. If it doesn’t improve, we may need to do some allergy testing. Thank you, doctor. I hope it clears up soon.\",\n  \n  \"summary\": \"Mr. Lee presents with red, itchy rashes that ooze, starting on his arms and spreading to his legs. He suspects an allergy and has tried over-the-counter creams without success. The doctor prescribes Hydrocortisone cream (to be applied twice daily) to reduce inflammation and itching, and notes that allergy testing may be necessary if symptoms persist.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Hydrocortisone cream\",\n      \"content\": \"Topical corticosteroid for inflammation\",\n      \"dosage\": \"N/A\",\n      \"usage_instructions\": \"1--0--0\",\n      \"purpose\": \"Reduce inflammation and itching.\"\n    }\n  ]\n}"},
    {text: "input: Hi, Dr. Taylor. I’m here because I’ve been having some really bad stomach cramps and diarrhea for the past few days. It started after I had some takeout, and I’m not sure if it’s food poisonin or what. I also feel kinda weak and tired.That sounds uncomfortable. Have you experienced any fever or vomiting?No fever, but I did vomit once last night. It was really unpleasant.We should run some tests to rule out any serious infections. Meanwhile, I’m going to prescribe Loperamide by Teva to help manage your diarrhea. You can take 2 mg after each loose stool, but don’t exceed 8 mg in a day. I’ll also suggest that you stay hydrated and rest.Thank you, doctor. I’ll be careful."},
    {text: "output: {\n  \"reviewed_transcription\": \"Hi, Dr. Taylor. I’m here because I’ve been having some really bad stomach cramps and diarrhea for the past few days. It started after I had some takeout, and I’m not sure if it’s food poisoning or what. I also feel kind of weak and tired. That sounds uncomfortable. Have you experienced any fever or vomiting? No fever, but I did vomit once last night. It was really unpleasant. We should run some tests to rule out any serious infections. Meanwhile, I’m going to prescribe Loperamide by Teva to help manage your diarrhea. You can take 2 mg after each loose stool, but don’t exceed 8 mg in a day. I’ll also suggest that you stay hydrated and rest. Thank you, doctor. I’ll be careful.\",\n  \n  \"summary\": \"Mr. Taylor presents with severe stomach cramps and diarrhea for several days, following takeout food. He reports one instance of vomiting and feels weak and tired, but no fever. The doctor prescribes Loperamide (2 mg after each loose stool, not exceeding 8 mg daily) to manage diarrhea and advises hydration and rest.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Loperamide\",\n      \"content\": \"Antidiarrheal medication\",\n      \"dosage\": \"2 mg after each loose stool\",\n      \"usage_instructions\": \"1--0--0\",\n      \"purpose\": \"Manage diarrhea symptoms.\"\n    }\n  ]\n}"},
    {text: "input: Hello, Dr. Kim. I’m really anxious all the time, and it’s been hard to focus at work. I feel like my heart races, and sometimes I even get dizzy. I’ve tried breathing exercises, but they don’t seem to help much.I understand that anxiety can be overwhelming. When did you first start noticing these symptoms?It’s been going on for a few months now, especially after I lost my job last year. I don’t know how to cope.That’s completely understandable. It’s important to address these feooling. Have you considered talking to a therapist? They can provide strategies to manage anxiety.I haven’t yet, but I think I might. I just don’t know where to start."},
    {text: "output: {\n  \"reviewed_transcription\": \"Hello, Dr. Kim. I’m really anxious all the time, and it’s been hard to focus at work. I feel like my heart races, and sometimes I even get dizzy. I’ve tried breathing exercises, but they don’t seem to help much. I understand that anxiety can be overwhelming. When did you first start noticing these symptoms? It’s been going on for a few months now, especially after I lost my job last year. I don’t know how to cope. That’s completely understandable. It’s important to address these feelings. Have you considered talking to a therapist? They can provide strategies to manage anxiety. I haven’t yet, but I think I might. I just don’t know where to start.\",\n  \n  \"summary\": \"Mr. Kim reports persistent anxiety, difficulty concentrating at work, palpitations, and occasional dizziness, which began after losing his job last year. Despite trying breathing exercises, he feels overwhelmed and is uncertain about how to cope. The doctor suggests considering therapy as a potential support option.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"N/A\",\n      \"content\": \"N/A\",\n      \"dosage\": \"N/A\",\n      \"usage_instructions\": \"N/A\",\n      \"purpose\": \"N/A\"\n    }\n  ]\n}"},
    {text: "input: Hi, Dr. Lewis. I’ve been experiencing these really bad stomach cramps, mostly after I eat. It feels like a burning sensation, and I’m worried it might be something serious. I went to the emergancy room last week, and they did an ultrasound, but the doctor said everything looked normal.I see. Stomach cramps can have many causes, including dietary issues or even stress. Have you noticed any particular foods that trigger the cramps?Yeah, I think dairy products make it worse, especially cheese and milk. I also feel bloated all the time.We should definitely look into this further. I recommend keeping a food diary for a week to track what you eat and any symptoms that follow. This might help identify triggers.Thanks, doctor. I’ll do that. Is there anything else I should be aware of?"},
    {text: "output: {\n  \"reviewed_transcription\": \"Hello, Dr. Kim. I’m really anxious all the time, and it’s been hard to focus at work. I feel like my heart races, and sometimes I even get dizzy. I’ve tried breathing exercises, but they don’t seem to help much. I understand that anxiety can be overwhelming. When did you first start noticing these symptoms? It’s been going on for a few months now, especially after I lost my job last year. I don’t know how to cope. That’s completely understandable. It’s important to address these feelings. Have you considered talking to a therapist? They can provide strategies to manage anxiety. I haven’t yet, but I think I might. I just don’t know where to start.\",\n  \n  \"summary\": \"Mr. Kim reports persistent anxiety, difficulty concentrating at work, palpitations, and occasional dizziness, which began after losing his job last year. Despite trying breathing exercises, he feels overwhelmed and is uncertain about how to cope. The doctor suggests considering therapy as a potential support option.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"N/A\",\n      \"content\": \"N/A\",\n      \"dosage\": \"N/A\",\n      \"usage_instructions\": \"N/A\",\n      \"purpose\": \"N/A\"\n    }\n  ]\n}"},
    {text: "input: Hi, Dr. Lewis. I’ve been experiencing these really bad stomach cramps, mostly after I eat. It feels like a burning sensation, and I’m worried it might be something serious. I went to the emergancy room last week, and they did an ultrasound, but the doctor said everything looked normal.I see. Stomach cramps can have many causes, including dietary issues or even stress. Have you noticed any particular foods that trigger the cramps?Yeah, I think dairy products make it worse, especially cheese and milk. I also feel bloated all the time.We should definitely look into this further. I recommend keeping a food diary for a week to track what you eat and any symptoms that follow. This might help identify triggers.Thanks, doctor. I’ll do that. Is there anything else I should be aware of?"},
    {text: "output: {\n  \"reviewed_transcription\": \"Hi, Dr. Lewis. I’ve been experiencing these really bad stomach cramps, mostly after I eat. It feels like a burning sensation, and I’m worried it might be something serious. I went to the emergency room last week, and they did an ultrasound, but the doctor said everything looked normal. I see. Stomach cramps can have many causes, including dietary issues or even stress. Have you noticed any particular foods that trigger the cramps? Yeah, I think dairy products make it worse, especially cheese and milk. I also feel bloated all the time. We should definitely look into this further. I recommend keeping a food diary for a week to track what you eat and any symptoms that follow. This might help identify triggers. Thanks, doctor. I’ll do that. Is there anything else I should be aware of?\",\n  \n  \"summary\": \"Mr. Lewis reports severe stomach cramps that occur primarily after eating, accompanied by a burning sensation. He visited the emergency room recently for an ultrasound, which returned normal results. The doctor suggests that dietary issues, particularly dairy products, may be contributing to the problem. A food diary is recommended to help identify any triggers.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"N/A\",\n      \"content\": \"N/A\",\n      \"dosage\": \"N/A\",\n      \"usage_instructions\": \"N/A\",\n      \"purpose\": \"N/A\"\n    }\n  ]\n}"},
    {text: "input: Hello, Dr. Davis. I’m here for my follow-up regarding my chronic respiratory issues. I’ve been coughing a lot and sometimes I feel a tightness in my chest. My last chest X-ray showed something that the doctor said might be bronchitis, but I’m not sure.We definitely need to address those symptoms. How often are you experiencing the cough, and have you noticed any wheezing?It’s pretty constant, especially at night, and yes, I do hear a wheezing sound when I breathe. My last spirometry test indicated reduced lung capacity, but I don’t know what that means.That suggests there may be some obstruction in your airways. I’m going to prescribe Advair by GlaxoSmithKline for your asthma. You’ll take one inhalation twice a day. Additionally, I’ll give you Prednisone by Mylan, a steroid, to help reduce inflammation. You’ll take 10 mg once daily for five days.Thanks, doctor. I really hope this helps my breathing."},
    {text: "output: {\n  \"reviewed_transcription\": \"Hello, Dr. Davis. I’m here for my follow-up regarding my chronic respiratory issues. I’ve been coughing a lot, and sometimes I feel a tightness in my chest. My last chest X-ray showed something that the doctor said might be bronchitis, but I’m not sure. We definitely need to address those symptoms. How often are you experiencing the cough, and have you noticed any wheezing? It’s pretty constant, especially at night, and yes, I do hear a wheezing sound when I breathe. My last spirometry test indicated reduced lung capacity, but I don’t know what that means. That suggests there may be some obstruction in your airways. I’m going to prescribe Advair by GlaxoSmithKline for your asthma. You’ll take one inhalation twice a day. Additionally, I’ll give you Prednisone by Mylan, a steroid, to help reduce inflammation. You’ll take 10 mg once daily for five days. Thanks, doctor. I really hope this helps my breathing.\",\n  \n  \"summary\": \"Mr. Davis is experiencing chronic respiratory issues, including constant coughing, chest tightness, and wheezing, particularly at night. A recent chest X-ray suggested bronchitis, and a spirometry test indicated reduced lung capacity. The doctor prescribes Advair (one inhalation twice daily) for asthma management and Prednisone (10 mg once daily for five days) to reduce inflammation.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Advair\",\n      \"content\": \"Fluticasone/Salmeterol\",\n      \"dosage\": \"One inhalation\",\n      \"usage_instructions\": \"1--0--1\",\n      \"purpose\": \"Manage asthma symptoms.\"\n    },\n    {\n      \"name\": \"Prednisone\",\n      \"content\": \"Prednisone\",\n      \"dosage\": \"10 mg\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Reduce inflammation in the airways.\"\n    }\n  ]\n}"},
    {text: "input: Thoratharjun DSA report Right CC injection bifurcation model. Intracranial angiogram shows occlusion of cervical IC just beyond the keratin pulp. Right subclavin injection normal V origin. Intracranial angiogram shows normal branches of vertebral vessel artery and its trunk. Left CCA injection shows about 60% stenosis of left cervical icatic region. Intracranial angiogram shows that both circulations of Asian MCP from left side impression right caroted occlusion with good bosmo coming from anterior communicating artery. The left cervical ICA shows more than 60% stenosis of cervical IC ovision recommendation to continue dual antiplatelet statins and plan stenting for prevention of further stroke"},
    {text: "output: {\n  \"reviewed_transcription\": \" Right CC injection bifurcation model. Intracranial angiogram shows occlusion of cervical ICA just beyond the carotid bulb. Right subclavian injection shows normal vertebral origin. Intracranial angiogram reveals normal branches of the vertebral artery and its trunk. Left CCA injection shows about 60% stenosis of the left cervical ICA region. Intracranial angiogram indicates that both circulations of the anterior cerebral artery (ACA) and middle cerebral artery (MCA) are supplied from the left side. Impression: right carotid occlusion with good blood flow coming from the anterior communicating artery. The left cervical ICA shows more than 60% stenosis. Recommendation to continue dual antiplatelet therapy, statins, and plan for stenting to prevent further stroke..\",\n  \n  \"summary\": \"The DSA report reveals significant findings, including occlusion of the cervical internal carotid artery beyond the carotid bulb and about 60% stenosis in the left cervical internal carotid region. The right subclavian artery and vertebral artery show normal anatomy. Collateral circulation is noted from the anterior communicating artery due to right carotid occlusion. The recommendation includes continuing dual antiplatelet therapy and statins, with a plan for stenting to prevent future strokes.\",\n  \n \"medicines\": [\n    {\n      \"name\": \"N/A\",\n      \"content\": \"N/A\",\n      \"dosage\": \"N/A\",\n      \"usage_instructions\": \"N/A\",\n      \"purpose\": \"N/A\"\n    }\n  ]\n}"},
    {text: "input: The MRA report shows marked narrowing of the right carotid artery at the bifurcation with 70% stenosis. The vertebral arteries are unremarkable, and the intracranial circulation appears normal. No evidence of any acute ischemic changes is seen in the brain parenchyma. Additionally, there is mild dilation of the right internal jugular vein. The recommendation is for a follow-up angiogram in three months to monitor the stenosis and to consider lifestyle modifications to reduce cardiovascular risks."},
    {text: "output: {\n  \"reviewed_transcription\": \"The MRA report shows marked narrowing of the right carotid artery at the bifurcation with 70% stenosis. The vertebral arteries are unremarkable, and the intracranial circulation appears normal. No evidence of any acute ischemic changes is seen in the brain parenchyma. Additionally, there is mild dilation of the right internal jugular vein. The recommendation is for a follow-up angiogram in three months to monitor the stenosis and to consider lifestyle modifications to reduce cardiovascular risks.\",\n  \n  \"summary\": \"The MRA report indicates significant stenosis (70%) of the right carotid artery at the bifurcation, while the vertebral arteries and intracranial circulation appear normal. There are no acute ischemic changes in the brain. A follow-up angiogram is recommended in three months, along with lifestyle modifications to lower cardiovascular risk.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"N/A\",\n      \"content\": \"N/A\",\n      \"dosage\": \"N/A\",\n      \"usage_instructions\": \"N/A\",\n      \"purpose\": \"N/A\"\n    }\n  ]\n}"},
    {text: "input: CT scan results indicate a mild cerebral edema in the left hemisphere without midline shift. There is a history of hypertension, but current blood pressure readings are stable. The attending physician suggests monitoring the patient closely and recommends a neuro consult for further evaluation. The patient has been experiencing episodic dizziness and occasional headaches but has not received any specific medications yet. A follow-up appointment is scheduled in two weeks for reassessment."},
    {text: "output: {\n  \"reviewed_transcription\": \"CT scan results indicate mild cerebral edema in the left hemisphere without midline shift. There is a history of hypertension, but current blood pressure readings are stable. The attending physician suggests monitoring the patient closely and recommends a neuro consult for further evaluation. The patient has been experiencing episodic dizziness and occasional headaches but has not received any specific medications yet. A follow-up appointment is scheduled in two weeks for reassessment.\",\n  \n  \"summary\": \"The CT scan reveals mild cerebral edema in the left hemisphere, and there is no midline shift. Blood pressure readings are stable despite a history of hypertension. The physician recommends close monitoring and a neuro consult for further evaluation. The patient experiences dizziness and headaches but has not been prescribed any medications. A follow-up appointment is planned in two weeks.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"N/A\",\n      \"content\": \"N/A\",\n      \"dosage\": \"N/A\",\n      \"usage_instructions\": \"N/A\",\n      \"purpose\": \"No medications prescribed at this time.\"\n    }\n  ]\n}"},
    {text: "input: Good afternoon, Dr. Lee. I’ve been feeling a lot of pressure in my chest lately, and sometimes it radiates to my left arm. I went for a stress test last week, and my doctor said it showed some abnormalities. I also have a history of high cholesterol.I see. Chest pain and arm discomfort can be concerning, especially with your history. We need to manage your cholesterol effectively. I’m going to prescribe Lipitor by Pfizer to help lower your cholesterol levels. You’ll take 40 mg once a day in the evening. Additionally, I’m prescribing Aspirin by Bayer to reduce your risk of heart problems; take 81 mg daily.Thank you, doctor. I hope this helps with my symptoms."},
    {text: "output: {\n  \"reviewed_transcription\": \"Good afternoon, Dr. Lee. I’ve been feeling a lot of pressure in my chest lately, and sometimes it radiates to my left arm. I went for a stress test last week, and my doctor said it showed some abnormalities. I also have a history of high cholesterol. I see. Chest pain and arm discomfort can be concerning, especially with your history. We need to manage your cholesterol effectively. I’m going to prescribe Lipitor by Pfizer to help lower your cholesterol levels. You’ll take 40 mg once a day in the evening. Additionally, I’m prescribing Aspirin by Bayer to reduce your risk of heart problems; take 81 mg daily. Thank you, doctor. I hope this helps with my symptoms.\",\n  \n  \"summary\": \"Mr. Lee reports experiencing pressure in his chest and radiating discomfort to his left arm, alongside a history of high cholesterol. The doctor prescribes Lipitor (40 mg once daily in the evening) to manage cholesterol levels and Aspirin (81 mg daily) to lower the risk of heart issues.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Lipitor\",\n      \"content\": \"Atorvastatin\",\n      \"dosage\": \"40 mg\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Lower cholesterol levels.\"\n    },\n    {\n      \"name\": \"Aspirin\",\n      \"content\": \"Acetylsalicylic Acid\",\n      \"dosage\": \"81 mg\",\n      \"usage_instructions\": \"1--0--0\",\n      \"purpose\": \"Reduce risk of heart problems.\"\n    }\n  ]\n}"},
    {text: "input: Hello, Dr. Patel. I have been experiencing severe joint pain in my knees and hands. I had some blood tests done, and the results indicate elevated rheumatoid factor. My doctor mentioned it could be rheumatoid arthritis.That sounds painful. To help manage the inflammation and pain, I’m going to prescribe Methotrexate by Amgen. You’ll start with 15 mg once a week. I’ll also give you Ibuprofen by Advil to help with pain relief; take 400 mg every 8 hours as needed.I appreciate your help, doctor. I’ll follow the treatment plan."},
    {text: "output: {\n  \"reviewed_transcription\": \"Hello, Dr. Patel. I have been experiencing severe joint pain in my knees and hands. I had some blood tests done, and the results indicate elevated rheumatoid factor. My doctor mentioned it could be rheumatoid arthritis. That sounds painful. To help manage the inflammation and pain, I’m going to prescribe Methotrexate by Amgen. You’ll start with 15 mg once a week. I’ll also give you Ibuprofen by Advil to help with pain relief; take 400 mg every 8 hours as needed. I appreciate your help, doctor. I’ll follow the treatment plan.\",\n  \n  \"summary\": \"Mr. Patel is suffering from severe joint pain in the knees and hands, with blood tests showing elevated rheumatoid factor. The doctor prescribes Methotrexate (15 mg once a week) for managing inflammation and Ibuprofen (400 mg every 8 hours as needed) for pain relief.\",\n  \n  \"medicines\": [\n    {\n      \"name\": \"Methotrexate\",\n      \"content\": \"Methotrexate\",\n      \"dosage\": \"15 mg\",\n      \"usage_instructions\": \"0--0--1\",\n      \"purpose\": \"Manage inflammation in rheumatoid arthritis.\"\n    },\n    {\n      \"name\": \"Ibuprofen\",\n      \"content\": \"Ibuprofen\",\n      \"dosage\": \"400 mg\",\n      \"usage_instructions\": \"1--0--0\",\n      \"purpose\": \"Provide pain relief.\"\n    }\n  ]\n}"},
      { text: `input: ${transcription}` },
      { text: 'output: {}' }  // Placeholder output
    ];

    const result = await model.generateContent({
      contents: [{ role: 'user', parts }],
      generationConfig,
    });

    const responseText = result.response.text();
    const responseData = JSON.parse(responseText);  // Parse the response

    // Check if responseData contains valid summary and medicines
    const reviewedTranscription = responseData.reviewed_transcription || 'Reviewed transcription not available';
    const summary = responseData.summary || 'Summary not available';
    const medicines = responseData.medicines || [];  // Default to empty array if not present

    return { reviewedTranscription, summary, medicines };
  } catch (error) {
    console.error('Error during Gemini AI summarization:', error);
    throw error;
  }
}
module.exports = {
  summarizeAndExtractPrescription,
};